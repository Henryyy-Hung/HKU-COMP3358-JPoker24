<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\hkh13\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.13\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="hku-comp3358-jpoker24-report">HKU-COMP3358-JPoker24 Report </h1>
<p><strong>Document Directory</strong></p>
<table>
<thead>
<tr>
<th>Section</th>
<th>Title</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Environment Set Up</td>
<td><a href="#1-environment-set-up">Link</a></td>
</tr>
<tr>
<td>2</td>
<td>How to Run</td>
<td><a href="#2-how-to-run-the-program">Link</a></td>
</tr>
<tr>
<td>3</td>
<td>Game Demo</td>
<td><a href="#3-game-demo">Link</a></td>
</tr>
</tbody>
</table>
<h2 id="1-environment-set-up">1. Environment Set Up </h2>
<p>This section provides a guidence on how to set up the environment to run the jar.</p>
<h3 id="11-overview">1.1 Overview </h3>
<p><strong>System</strong></p>
<ul>
<li>Linux Ubuntu 22.04</li>
</ul>
<p><strong>Dependencies</strong></p>
<ul>
<li>openjdk version "11.0.22" 2024-01-16</li>
<li>mysql Ver 8.0.36-0ubuntu0.22.04.1 for Linux on x86_64 ((Ubuntu))</li>
<li>mysql-connector-j_8.4.0-1ubuntu22.04_all</li>
<li>glassfish-6.1.0</li>
</ul>
<p><strong>Assumption</strong></p>
<ul>
<li>RMI, JMS use localhost.</li>
</ul>
<h3 id="12-set-up-mysql">1.2 Set Up MySQL </h3>
<h4 id="121-install-mysql">1.2.1 Install MySQL </h4>
<p>Install MySQL server in Linux terminal.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-server
<span class="token function">sudo</span> <span class="token function">service</span> mysql status
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-client
</code></pre><h4 id="122-set-up-database--tables">1.2.2 Set Up Database &amp; Tables </h4>
<p>Open MySQL Console.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">sudo</span> mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre><p>Set Up Database and Database User.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-DATABASE">DATABASE</span> GameDB<span class="token punctuation">;</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-USER">USER</span> <span class="token string">'gameUser'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword keyword-BY">BY</span> <span class="token string">'gamePassword'</span><span class="token punctuation">;</span>
<span class="token keyword keyword-GRANT">GRANT</span> <span class="token keyword keyword-ALL">ALL</span> <span class="token keyword keyword-PRIVILEGES">PRIVILEGES</span> <span class="token keyword keyword-ON">ON</span> GameDB<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword keyword-TO">TO</span> <span class="token string">'gameUser'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword keyword-PRIVILEGES">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre><p>Switch to the Game Database.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-USE">USE</span> GameDB<span class="token punctuation">;</span>
</code></pre><p>Set Up Tables.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> Users <span class="token punctuation">(</span>
    name <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    password <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    is_online <span class="token keyword keyword-BOOLEAN">BOOLEAN</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword keyword-DEFAULT">DEFAULT</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> Games <span class="token punctuation">(</span>
    id <span class="token keyword keyword-INT">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span><span class="token punctuation">,</span>
    completion_time <span class="token keyword keyword-DECIMAL">DECIMAL</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> Participations <span class="token punctuation">(</span>
    game_id <span class="token keyword keyword-INT">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    user_name <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    is_winner <span class="token keyword keyword-BOOLEAN">BOOLEAN</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword keyword-DEFAULT">DEFAULT</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">,</span> game_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> Users<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-FOREIGN">FOREIGN</span> <span class="token keyword keyword-KEY">KEY</span> <span class="token punctuation">(</span>game_id<span class="token punctuation">)</span> <span class="token keyword keyword-REFERENCES">REFERENCES</span> Games<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Quit MySQL Console.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code>\q
</code></pre><h4 id="123-prepare-mysql-jdbc-driver">1.2.3 Prepare MySQL JDBC Driver </h4>
<ul>
<li>
<p>Download MySQL JDBC driver <code>mysql-connector-j_8.4.0-1ubuntu22.04_all</code> at <a href="http://dev.mysql.com/downloads/connector/j/">http://dev.mysql.com/downloads/connector/j/</a></p>
</li>
<li>
<p>Find the <strong><code>mysql-connector-j-8.4.0.jar</code></strong> at <code>.../mysql-connector-j_8.4.0-1ubuntu22.04_all/usr/share/java/mysql-connector-j-8.4.0.jar</code>, and remember the path to it as <strong><code>$mysql_connector_path</code></strong>.</p>
</li>
</ul>
<h3 id="13-set-up-glassfish-610-jms-service">1.3 Set Up Glassfish 6.1.0 (JMS Service) </h3>
<ul>
<li><strong>Important</strong>: Glassfish 6.1.0 is very different from Glassfish 5, since it migrate the <code>jms</code> package from <code>javax.jms</code> to <code>jakarta.jms</code>. Please <strong>DO NOT</strong> run this application under Glassfish 5.</li>
</ul>
<h4 id="131-install-glassfish-610-on-linux-ubuntu">1.3.1 Install Glassfish 6.1.0 on Linux Ubuntu </h4>
<ul>
<li>
<p>Follow the tutorial at <a href="https://www.howtoforge.com/how-to-install-glassfish-on-ubuntu-22-04/">https://www.howtoforge.com/how-to-install-glassfish-on-ubuntu-22-04/</a> to download and set up glassfish 6.1.0.</p>
</li>
<li>
<p>Suppose you follow the guideline and download the <code>glassfish-6.1.0</code>.</p>
</li>
<li>
<p>Find the <strong><code>gf-client.jar</code></strong> at <code>.../glassfish-6.1.0/glassfish6/glassfish/lib/gf-client.jar</code>, and remember the path to it as <strong><code>$gf_client_path</code></strong>.</p>
</li>
</ul>
<h4 id="132-set-up-glassfish-jms-service">1.3.2 Set Up Glassfish JMS Service </h4>
<ul>
<li>
<p>Enter you glassfish admin console at <a href="http://localhost:4848">http://localhost:4848</a>, and login to it.</p>
</li>
<li>
<p>Under side bar, navigate to <code>Resources -&gt; JMS Resources -&gt; Connection Factories</code>.</p>
<p><img src="./readme_assets/images/glassfish_1.png" alt="Glassfish Connection Factory"></p>
</li>
<li>
<p>Click <code>New</code> Button on the right Panel to create a <code>JPoker24GameConnectionFactory</code>, the field <code>JNDI Name</code> is <code>jms/JPoker24GameConnectionFactory</code> and the <code>Resource Type</code> is <code>jakarta.jms.ConnectionFactory</code>.</p>
<p><img src="./readme_assets/images/glassfish_2.png" alt="Glassfish Connection Factory Set Up"></p>
</li>
<li>
<p>Under side bar, navigate to <code>Resources -&gt; JMS Resources -&gt; Destination Resources</code>.</p>
<p><img src="./readme_assets/images/glassfish_3.png" alt="Glassfish Destination Resources"></p>
</li>
<li>
<p>Click <code>New</code> Button on the right Panel to create a <code>JPoker24GameQueue</code>, the field <code>JNDI Name</code> is <code>jms/JPoker24GameQueue</code>, the <code>Physical Destination Name</code> is <code>JPoker24GameQueue</code>, and the <code>Resource Type</code> is <code>jakarta.jms.Queue</code>.</p>
<p><img src="./readme_assets/images/glassfish_4.png" alt="Glassfish Destination Resources"></p>
</li>
<li>
<p>Click <code>New</code> Button on the right Panel to create a <code>JPoker24GameTopic</code>, the field <code>JNDI Name</code> is <code>jms/JPoker24GameTopic</code>, the <code>Physical Destination Name</code> is <code>JPoker24GameTopic</code>, and the <code>Resource Type</code> is <code>jakarta.jms.Topic</code>.</p>
<p><img src="./readme_assets/images/glassfish_5.png" alt="Glassfish Destination Resources"></p>
</li>
</ul>
<h2 id="2-how-to-run-the-program">2 How to Run the Program </h2>
<h4 id="21-run-server--client">2.1 Run Server &amp; Client </h4>
<ol>
<li>
<p>Open the terminal under <code>JPoker24Game</code> directory. Copy <code>glassfish-6.1.0</code> and <code>mysql-connector-j_8.4.0-1ubuntu22.04_all</code>, which you download in <strong>section 1.2.3</strong> and <strong>1.3.1</strong> respectively, under <code>lib</code> if you want to directly copy and paste the command to run <code>.jar</code> file.</p>
<p><strong>File Structure of Submitted File</strong></p>
<pre data-role="codeBlock" data-info="" class="language-text"><code>JPoker24Game                (Open Linux Terminal Here)
├── lib
│&nbsp;&nbsp; ├── glassfish-6.1.0
│&nbsp;&nbsp; └── mysql-connector-j_8.4.0-1ubuntu22.04_all
├── JPoker24Game.jar
├── JPoker24GameServer.jar
└── security.policy
</code></pre></li>
<li>
<p>Enter command below to check the <strong>availability of port 1099</strong>.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">sudo</span> <span class="token function">netstat</span> <span class="token parameter variable">-tulpn</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">1099</span>
</code></pre></li>
<li>
<p>If Occupied, enter command below to kill the thread. Replace <strong>$PID</strong> with the PID shown output of the command above. You must ensure port 1099 is available. A demo can found in image.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">sudo</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token variable">$PID</span>
</code></pre><p><img src="readme_assets\images\release_port.png" alt="alt text"></p>
</li>
<li>
<p>To start the server, use command below if you follow the directory structure in 1.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">java</span> <span class="token parameter variable">-cp</span> <span class="token string">"JPoker24GameServer.jar\
:lib/glassfish-6.1.0/glassfish6/glassfish/lib/gf-client.jar\
:lib/mysql-connector-j_8.4.0-1ubuntu22.04_all/usr/share/java/mysql-connector-j-8.4.0.jar"</span><span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.manager</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.policy</span><span class="token operator">=</span>security.policy <span class="token punctuation">\</span>
com.server.ServerMain
</code></pre><p><img src="readme_assets\images\run_server_jar.png" alt="alt text"></p>
<p>If you are run at other place, or did not proper configure the <code>lib</code> directory, please use the command template below to execute the jar file.</p>
<ul>
<li>
<p>Replace <strong>$server_jar_path</strong> with path to <strong>JPoker24GameServer.jar</strong>.</p>
</li>
<li>
<p>Replace <strong>$mysql_connector_path</strong> with the path to <strong>mysql-connector-j-8.4.0.jar</strong>.</p>
</li>
<li>
<p>Replace <strong>$gf_client_path</strong> with path to <strong>gf-client.jar</strong> of glassfish 6.1.0.</p>
</li>
<li>
<p>Replace <strong>$security_policy_path</strong> with path to <strong>security.policy</strong>.</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">java</span> <span class="token parameter variable">-cp</span> <span class="token string">"<span class="token variable">$server_jar_path</span>\
:<span class="token variable">$mysql_connector_path</span>\
:<span class="token variable">$gf_client_path</span>"</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.manager</span> <span class="token parameter variable">-Djava.security.policy</span><span class="token operator">=</span><span class="token variable">$security_policy_path</span> <span class="token punctuation">\</span>
com.server.ServerMain
</code></pre></li>
<li>
<p>To start the server, use command below if you follow the directory structure in 1.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">java</span> <span class="token parameter variable">-cp</span> <span class="token string">"JPoker24Game.jar\
:lib/glassfish-6.1.0/glassfish6/glassfish/lib/gf-client.jar"</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.manager</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.policy</span><span class="token operator">=</span>security.policy <span class="token punctuation">\</span>
com.client.ClientMain localhost
</code></pre><p><img src="readme_assets\images\run_client_jar.png" alt="alt text"></p>
<p>If you are run at other place, or did not proper configure the <code>lib</code> directory, please use the command template below to execute the jar file.</p>
<ul>
<li>
<p>Replace <strong>$client_jar_path</strong> with path to <strong>JPoker24Game.jar</strong>.</p>
</li>
<li>
<p>Replace <strong>$gf_client_path</strong> with path to <strong>gf-client.jar</strong> of glassfish 6.1.0.</p>
</li>
<li>
<p>Replace <strong>$security_policy_path</strong> with path to <strong>security.policy</strong>.</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">java</span> <span class="token parameter variable">-cp</span> <span class="token string">"<span class="token variable">$client_jar_path</span>\
:<span class="token variable">$gf_client_path</span>"</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.manager</span> <span class="token punctuation">\</span>
<span class="token parameter variable">-Djava.security.policy</span><span class="token operator">=</span><span class="token variable">$security_policy_path</span> <span class="token punctuation">\</span>
com.client.ClientMain localhost
</code></pre></li>
<li>
<p>Ensure you provide sufficient permission in security policy. Below are a safe option.</p>
<pre data-role="codeBlock" data-info="policy" class="language-policy policy"><code>grant {
    permission java.security.AllPermission;
};
</code></pre></li>
</ol>
<h3 id="22-inspect-the-mysql-database">2.2 Inspect the MySQL Database </h3>
<ol>
<li>
<p>Open MySQL console in linux terminal.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">sudo</span> mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre></li>
<li>
<p>Switch to the database we use.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-USE">USE</span> GameDB<span class="token punctuation">;</span>
</code></pre></li>
<li>
<p>Repeatly enter commands below to inspect the three tables we created.</p>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> Users<span class="token punctuation">;</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> Games<span class="token punctuation">;</span>
<span class="token keyword keyword-SELECT">SELECT</span> <span class="token operator">*</span> <span class="token keyword keyword-FROM">FROM</span> Participations <span class="token keyword keyword-ORDER">ORDER</span> <span class="token keyword keyword-BY">BY</span> game_id <span class="token keyword keyword-ASC">ASC</span><span class="token punctuation">,</span> is_winner <span class="token keyword keyword-DESC">DESC</span><span class="token punctuation">,</span> user_name <span class="token keyword keyword-ASC">ASC</span><span class="token punctuation">;</span>
</code></pre></li>
</ol>
<h3 id="23-view-source-code">2.3 View Source Code </h3>
<p>Following the assignment instruction, the source code has been packed within the <code>.jar</code> file. To view the source code, please decompress the <code>.jar</code> file by command below.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>jar xf filename.jar
</code></pre><p>Regarding the strucuture of <code>.jar</code> file, all the source code are under <code>com</code> directory. The <code>jms</code>, <code>common</code>, <code>enum</code>, <code>utils</code> package are shared by both server and client, so view them once is enough.</p>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code>JPoker24Game.jar              JPoker24GameServer.jar
├── assets                    ├── com
│   └── images                │   ├── server
├── com                       │   ├── handler
│   ├── client                │   ├── jms
│   ├── ui                    │   ├── common
│   ├── jms                   │   ├── enums
│   ├── common                │   └── utils
│   ├── enums                 └── META-INF
│   └── utils                     └── MANIFEST.MF
└── META-INF
    └── MANIFEST.MF
</code></pre><h2 id="3-game-demo">3. Game Demo </h2>
<h3 id="21-gui-design">2.1 GUI Design </h3>
<p>Diagram below shows the overview of client GUI. The left side shows different panels in main frame, including user profile panel, game panels in diffrent stage, and leaderborad panel. The rgiht side shows the login and sign up window. Notice that hover effect has implemented on the button. Warning pop up will not be shown here as it has been included in previous report.</p>
<p><img src="readme_assets\images\gui_overview.png" alt="GUI Overview"></p>
<h3 id="22-basic-game-play-mechanism">2.2 Basic Game Play Mechanism </h3>
<h4 id="221-basic-game-flow-game-stages--database-handling">2.2.1 Basic Game Flow (Game Stages &amp; Database Handling) </h4>
<ol>
<li><strong>Client Initialization</strong>: The user initiates gameplay by clicking the "Start Game" button on the client interface. This action sends a join request to the server via a JMS queue. The client then displays a waiting panel while it awaits server response.</li>
</ol>
<img src="readme_assets\images\game_1.png">
<figcaption align="center">Initial Client State (2 Players &amp; 1 Outsider)</figcaption>
<img src="readme_assets\images\game_2.png">
<figcaption align="center">One Player Click on Start Game</figcaption>
<img src="readme_assets\images\client_log_1.png">
<figcaption align="center">Client Side Log for Alex Sending Joining Request</figcaption>
<img src="readme_assets\images\db_log_1.png">
<figcaption align="center">Database Log at Initial State (Empty)</figcaption>
<ol start="2">
<li><strong>Server Session Handling</strong>: Upon receiving the join request, the server either assigns the user to an existing game session or creates a new one if none are available. Each game session functions as a separate "game room," allowing for the isolation of different groups of players. Following the assignment, the session triggers a start timer which we will discuss later, creates a database record for the session, and transmits the session ID back to the client through the JMS queue.</li>
</ol>
<img src="readme_assets\images\server_log_1.png">
<figcaption align="center">Server Side Log for Session Creation and Assignment</figcaption>
<img src="readme_assets\images\db_log_2.png">
<figcaption align="center">Game Session Session Record Creation in Databse</figcaption>
<ol start="3">
<li><strong>Client Session Subscription</strong>: After receiving the session ID, the client subscribes to a session-specific JMS topic. This is achieved by setting a selector with the session ID, which ensures that the client only receives messages pertinent to its game room. Subsequently, the client sends a readiness message to the server via the JMS queue, indicating its preparedness to engage in the game.</li>
</ol>
<img src="readme_assets\images\client_log_2.png">
<figcaption align="center">Client Side Log for Session Subscription of Alex</figcaption>
<ol start="4">
<li><strong>Server Game Initialization</strong>: When all required players in a session are ready, the server finalizes the game setup by distributing necessary game elements such as cards and participant details. A game start message is then disseminated to the session's JMS topic, which has a string property of <code>SesseionID = '$sessionId'</code>. Concurrently, the server updates the game session's database record with participant details.</li>
</ol>
<img src="readme_assets\images\server_log_2.png">
<figcaption align="center">Server Side Log for Initialization of Game</figcaption>
<img src="readme_assets\images\db_log_3.png">
<figcaption align="center">Database Log for Participation Record</figcaption>
<ol start="5">
<li><strong>Client Game Start</strong>: Upon reception of the game start message, client in the session update their GUI to display the cards and participant information provided. Players write expressions using the value of four cards to achieve the target number 24 and submit their answers via the JMS queue to the server. The submission of answer is done by entering expression in input field and press <code>ENTER</code>.</li>
</ol>
<img src="readme_assets\images\client_log_3.png">
<figcaption align="center">Client Log for Receiving Game Start Message</figcaption>
<img src="readme_assets\images\game_3.png">
<figcaption align="center">Game Started and One User Entering Correct Answer</figcaption>
<img src="readme_assets\images\client_log_4.png">
<figcaption align="center">Client Log for Answer Submission</figcaption>
<ol start="6">
<li><strong>Server Expression Validation</strong>: The server validates any received expressions. If an expression correctly forms the number 24, the server updates the database with the winner's details and broadcasts the winning announcement to all players in the game room via the JMS topic. It also sends updated leaderboard information to all players.</li>
</ol>
<img src="readme_assets\images\server_log_3.png">
<figcaption align="center">Server Side Log for Answer Processing, Winner Broadcast to sesion players &amp; Leaderboard Broadcast to all users</figcaption>
<img src="readme_assets\images\db_log_4.png">
<figcaption align="center">Database Log on Updating Game Completion Time and Winner</figcaption>
<ol start="7">
<li>
<p><strong>Client Winner Display</strong>: The client receives and displays the winner's details and their successful expression on the GUI, offering congratulations. Also, this triggers players of the session to update their personal profile and corresponding panel, as it changes.</p>
</li>
<li>
<p><strong>Client Leaderboard Update</strong>: The client receives updated leaderboard information and refreshes the GUI, base on the information extracted from the message, to reflect the new standings.</p>
</li>
</ol>
<img src="readme_assets\images\client_log_5.png">
<figcaption align="center">Game Session End Message &amp; LeaderBoard Update Message Received</figcaption>
<img src="readme_assets\images\game_4.png">
<figcaption align="center">Display of Game Winner for Session Players (left) &amp; Global Leaderboard Update (right)</figcaption>
<img src="readme_assets\images\game_5.png">
<figcaption align="center">Personal Profile Update for Session Player</figcaption>
<ol start="9">
<li>The communication design utilizes JMS queues with selectors on unique Receiver IDs for secure P2P communication between the client and server, ensuring that messages are delivered to and received from the correct parties, thereby enhancing the reliability and privacy of interactions. Meanwhile, the use of JMS topics with session ID selectors allows for efficient, targeted broadcasting to all players within a specific game room, or all online players.</li>
</ol>
<h4 id="222-game-join-handling-case-handling">2.2.2 Game Join Handling (Case Handling) </h4>
<p>In the game, various mechanisms have been developed to manage how players can join a game. Initially, the game room status is set to <code>WAITING_FOR_PLAYERS_TO_JOIN</code>.</p>
<p>The game room requires a minimum of 2 players and can accommodate a maximum of 4 players.</p>
<p>Players have a 10-second window to join the game room, provided the maximum capacity has not been reached. If the maximum capacity is reached within this time, the game room status changes to <code>WAITING_FOR_PLAYERS_TO_READY</code>.</p>
<p>If the minimum capacity is met 10 seconds after the game room creation, or upon subsequent player joins, the status also transitions to <code>WAITING_FOR_PLAYERS_TO_READY</code>.</p>
<p>Upon the current status is <code>WAITING_FOR_PLAYERS_TO_READY</code> and receiving a readiness confirmation from each player, the game checks if all players are ready. If so, the game immediately proceeds to prepare the necessary game materials and broadcasts them to the players in the session.</p>
<p>These settings ensure that the game session can fill up quickly if all players join within the initial 10-second window, and can start promptly after this window if the minimum player requirement is met.</p>
<img src="readme_assets\images\game_3.png">
<figcaption align="center">Game with 2 Players</figcaption>
<img src="readme_assets\images\game_4.png">
<figcaption align="center">Game with 2 Players (Win)</figcaption>
<img src="readme_assets\images\game_6.png">
<figcaption align="center">Game with 3 Players</figcaption>
<img src="readme_assets\images\game_7.png">
<figcaption align="center">Game with 3 Players(Win)</figcaption>
<img src="readme_assets\images\game_8.png">
<figcaption align="center">Game with 4 Players</figcaption>
<img src="readme_assets\images\game_9.png">
<figcaption align="center">Game with 4 Players (Win)</figcaption>
<h4 id="223-multi-session-support-session-management">2.2.3 Multi-Session Support (Session Management) </h4>
<p>The game suppor multiple session (game room). Image below shows the 4 game session playing at the same time, each group have 2 users. The sessions are <code>TOP LEFT</code>, <code>TOP RIGHT</code>, <code>BOTTOM LEFT</code>, <code>BOTTOM RIGHT</code>.</p>
<img src="readme_assets\images\game_10.png">
<figcaption align="center">Game with 4 Room</figcaption>
<img src="readme_assets\images\game_11.png">
<figcaption align="center">Game with 4 Room (4 Separate Win)</figcaption>
<h3 id="23-answer-evaluation-and-validation">2.3 Answer Evaluation and Validation </h3>
<p>The section above already shows the ability of app handling a string expression, especially calculating whether the result equals to 24. This section will majorly show the case including:</p>
<ul>
<li>validation: missing number</li>
<li>validation: excess number</li>
<li>validation: use of invalid operators</li>
<li>evaluation: incorrect result of valid expression (not equal to 24)</li>
</ul>
<p>Please view these cases from left to right in the image below:</p>
<img src="readme_assets\images\game_12.png">
<figcaption align="center">Game with 4 Room</figcaption>
<p>Note: for the all these cases, the game will allow player to have more trial by click the <code>OK</code> button.</p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>